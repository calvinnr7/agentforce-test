<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Agentforce Test â€“ GitHub Pages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
	
  <meta name="robots" content="noindex,nofollow" />
  <!-- See Step 1 for why this CSP is needed -->
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self' https: data: blob:;
             script-src 'self' https: 'unsafe-inline' 'unsafe-eval';
             connect-src 'self' https: wss:;
             img-src 'self' https: data: blob:;
             style-src 'self' 'unsafe-inline' https:;
             frame-src https:;
             font-src 'self' https: data:;">
<style>
  :root{
    --brand-green-light: #bfeee1;  /* very light mint */
    --brand-green:       #0AA373;  /* your brand green */
    --brand-green-dark:  #0A855F;  /* deeper green */
  }

  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;

    /* Top â†’ bottom linear gradient (light to dark) */
    background: linear-gradient(
      180deg,
      var(--brand-green-light) 0%,
      var(--brand-green) 45%,
      var(--brand-green-dark) 100%
    );
  }

  .card{
    background:#fff;
    border-radius:16px;
    padding:24px;
    max-width:760px; width:90%;
    box-shadow:0 12px 28px rgba(0,0,0,.25);
    color:#111;
  }
</style>



</head>
<body>
  <div class="card">
    <h1>Agentforce (MIAW) â€“ Test Page</h1>
    <p class="muted">Hosted on GitHub Pages. Not indexed. Use for safe agent testing.</p>
    <p>
      <button onclick="openChat()">Open Chat</button>
      <button onclick="location.reload()">Hard Refresh</button>
    </p>
    <pre id="log" class="muted"></pre>
  </div>

  <!-- ðŸ”½ Paste the official Messaging web snippet from Salesforce here (verbatim) ðŸ”½ -->
  <script type='text/javascript'>

	  function getUrlParam(name) {
    	const params = new URLSearchParams(window.location.search);
  		return params.get(name);
		}

	function initEmbeddedMessaging() {
		try {
			embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'
			embeddedservice_bootstrap.settings.enableUserInputForConversationWithBot = false;
			embeddedservice_bootstrap.settings.disableStreamingResponses = true;   


			 // Read from URL and inject into hidden prechat field for recommended plan code sent in CTA URL
		    document.addEventListener("onEmbeddedMessagingReady", function() {
			  console.log("âš¡ MIAW bootstrap ready");
			  
			  const planCode = getUrlParam("recommendedPlanCode");
			  console.log("plan code is: " + planCode);
			  if (planCode) {
			    embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
			      recommendedPlanCode: planCode   // must equal the Channel Variable Name in Setup
			    });
			    console.log("ðŸ”’ Hidden prechat set: recommendedPlanCode = " + planCode);
			  }
			});



			embeddedservice_bootstrap.init(
				'00DOg000001Vluv',
				'ONZ_Messaging_Web',
				'https://onz--dcaidev.sandbox.my.site.com/ESWONZMessagingWeb1757919743068',
				{
					scrt2URL: 'https://onz--dcaidev.sandbox.my.salesforce-scrt.com'
				}
			);
		} catch (err) {
			console.error('Error loading Embedded Messaging: ', err);
		}
	};
</script>
<script type='text/javascript' src='https://onz--dcaidev.sandbox.my.site.com/ESWONZMessagingWeb1757919743068/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>


<script>
  document.addEventListener("onEmbeddedMessagingReady", function() {
    log("MIAW bootstrap ready â€” you can now open chat.");
  });

  function openChat(){
    try {
      if (window.embeddedservice_bootstrap?.utilAPI){
        embeddedservice_bootstrap.utilAPI.openChat();
        console.log('openChat() called.');
      } else {
        log('Bootstrap not ready yet. Try again in a second.');
      }
    }catch(e){ console.log('openChat error: ' + e.message); }
  }
</script>
</body>
</html>
